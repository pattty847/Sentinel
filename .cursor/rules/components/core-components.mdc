---
globs: libs/core/*
alwaysApply: false
---

# Core Components

## Market Data Pipeline
- `marketdata/ws`: `BeastWsTransport` and `SubscriptionManager` handle WebSocket connectivity, reconnect backoff, and declarative subscription frames.
- `marketdata/dispatch`: `MessageDispatcher` and helpers normalize exchange payloads into typed events before they reach the cache.
- `marketdata/cache`: `DataCache` stores rolling trades and live order books; `DataCacheSinkAdapter` is the only writer entry point.
- `marketdata/auth`: `Authenticator` issues JWTs; keep it injectable for testing and never hardcode secret paths.
- `marketdata/model`: DTOs such as `Trade`, `OrderBook`, and `LiveOrderBook`—keep them lightweight and serialization-free.

## Cross-Cutting Infrastructure
- `SentinelLogging` powers categorized logging; stick to `sentinel.app|data|render|debug` channels.
- `LockFreeQueue` provides the SPSC queues bridging worker ↔ GUI threads; usage must remain single-producer/single-consumer.
- `StatisticsProcessor`, `RuleEngine`, and rule types remain Qt-free business logic—extend them without introducing GUI dependencies.

## Expectations
- Maintain exchange-agnostic boundaries: new providers plug in through transport + dispatcher layers without touching higher tiers.
- Keep files under the shared 500-LOC soft cap and prefer extraction over monolithic additions.
- All new tests for these modules live in `tests/marketdata` until the wider suite returns.
